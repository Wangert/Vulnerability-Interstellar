<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="base :: #public_head">

</head>
<body style="margin: 0">
<nav th:replace="base :: #public_nav">
</nav>
<hr th:replace="base :: #public_hr"/>

<div class="dashboard_base">

    <h2 style="font-size: x-large; margin-top: 1%">VHW Dashboard <span class="label label-success"><span class="glyphicon glyphicon-blackboard"></span></span></h2>

    <div class="jumbotron" style="padding: 0.5%; margin-bottom: 10px">
        <h3>Hello, dear users!</h3>
        <p style="font-size: large">This interface can provide you with all behavior records of VHW platform. If you find any bad behavior records, you can click the button below to report them anonymously!</p>
        <p><button class="btn btn-danger btn-lg"  data-toggle="modal" data-target="#exampleModal">Anonymous Reporting</button></p>

        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="background-color: rgba(0, 0, 0, 0.8)">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h3 class="modal-title" id="exampleModalLabel" style="color: white">Anonymous Reporting</h3>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="recipient-name" class="control-label" style="color: white">The user name of the relevant user:</label>
                                <input type="text" class="form-control" id="recipient-name">
                            </div>
                            <div class="form-group">
                                <label for="recipient-name" class="control-label" style="color: white">Period of time:</label>
                                <input type="text" class="form-control" id="date">
                            </div>
                            <div class="form-group">
                                <label for="message-text" class="control-label" style="color: white">Event description:</label>
                                <textarea class="form-control" id="message-text" rows="6"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-danger">To Report</button>
                    </div>
                </div>
            </div>
        </div>



    </div>

    <div class="dashboard_1">

        <div class="page-header" style="margin-top: 2px">
            <h4>Number of Platform Vulnerability Submissions <small style="color: #5bc0de">Real-time Data</small></h4>
        </div>

        <div id="vulnerabilityChart" style="width: 100%; height: 350px;"></div>
    </div>

    <div class="dashboard_1">

        <div class="page-header" style="margin-top: 2px">
            <h4>Number of Platform Patch Submissions <small style="color: #5bc0de">Real-time Data</small></h4>
        </div>


        <div id="patchChart" style="width: 100%; height: 350px;"></div>

    </div>

    <div class="dashboard_user">

        <div class="page-header" style="margin-top: 2px">
            <h4>The Number of Total Users</h4>
        </div>


        <div style="margin-top: 35px">
            <h1 style="color: greenyellow; font-size: 60px; font-style: italic; font-weight: bolder">[[${numberOfUser} + 6]]</h1>
        </div>

    </div>

    <div class="dashboard_user">

        <div class="page-header" style="margin-top: 2px">
            <h4>The Number of Needy Users</h4>
        </div>


        <div style="margin-top: 35px">
            <h1 style="color: red; font-size: 60px; font-style: italic; font-weight: bolder">3</h1>
            <button type="button" class="btn btn-warning" style="width: 100%" data-toggle="modal" data-target="#myModal">Contribution Transfer</button>

            <div class="modal right fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document" style="width: 90%">
                    <div class="modal-content" style="background-color: rgba(255,228,181, 1)">
                        <div class="modal-header" style="border-bottom-color: black">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h3 class="modal-title" id="myModalLabel">Contribution Transfer</h3>
                        </div>
                        <div class="modal-body">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab" style="color: black; font-weight: bold">joten</a></li>
                                <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" style="color: black; font-weight: bold">yintao</a></li>
                                <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab" style="color: black; font-weight: bold">Ludan</a></li>
                            </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="home">
                                    <br/>
                                    <p>Registration time:&nbsp; 2019-09-24 14:23:11</p>
                                    <p>Active Situation:&nbsp; 78</p>
                                    <p>Total Contribution:&nbsp; 25</p>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="profile">
                                    <br/>
                                    <p>Registration time:&nbsp; 2019-09-17 09:41:44</p>
                                    <p>Active Situation:&nbsp; 51</p>
                                    <p>Total Contribution:&nbsp; 70</p>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="messages">
                                    <br/>
                                    <p>Registration time:&nbsp; 2019-10-20 12:11:56</p>
                                    <p>Active Situation:&nbsp; 39</p>
                                    <p>Total Contribution:&nbsp; 5</p>
                                </div>
                            </div>

                            <hr style="background-color: black; height: 2px"/>
                            <label for="transfer_contribution" class="control-label" style="">The number of migration contributions:</label>
                            <input type="text" class="form-control" id="transfer_contribution">


                        </div>
                        <div class="modal-footer" style="border-top-color: black">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-info">Contribution Transfer</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- 漏洞提交记录区域  -->
    <div class="dashboard_2">

        <div class="page-header" style="margin-top: 2px">
            <h3>Vulnerability Submission Record <small style="color: #5bc0de">Real-time Data</small></h3>
        </div>

        <div style="width: 99.5%; height:290px; overflow: hidden; overflow-y:scroll; background-color: rgba(248,248,255,0.3)">
            <table style="margin-left: 2%">
                <tr>
                    <th style="text-align: center">Date</th>
                    <th style="text-align: center">User</th>
                    <th style="text-align: center">Vulnerability Hash</th>
                </tr>

                <tr th:each="map : ${vulnerabilityDataList}" style="width: 100%; color: #9C1A1C; font-weight: bold;">
                    <td style="text-align: center; width: 20%">
                        [[${map.releaseDate}]]
                    </td>
                    <td  style="text-align: center; width: 15%">
                        [[${map.username}]]
                    </td>
                    <td  style="text-align: center; width: 60%">
                        [[${map.ipfsHash}]]
                    </td>
                </tr>

            </table>


        </div>

    </div>

    <!-- 补丁提交记录区域  -->
    <div class="dashboard_2">

        <div class="page-header" style="margin-top: 2px">
            <h3>Patch Submission Record <small style="color: #5bc0de">Real-time Data</small></h3>
        </div>

        <div style="width: 99.5%; height:290px; overflow: hidden; overflow-y:scroll; background-color: rgba(248,248,255,0.3)">


            <table style="margin-left: 2%">
                <tr>
                    <th style="text-align: center">Date</th>
                    <th style="text-align: center">User</th>
                    <th style="text-align: center">Patch Hash</th>
                </tr>

                <tr th:each="map : ${patchDataList}" style="width: 100%; color: #2c3b4e; font-weight: bold;">
                    <td style="text-align: center; width: 20%">
                        [[${map.releaseDate}]]
                    </td>
                    <td  style="text-align: center; width: 15%">
                        [[${map.username}]]
                    </td>
                    <td  style="text-align: center; width: 60%">
                        [[${map.ipfsHash}]]
                    </td>
                </tr>

            </table>

        </div>
        

    </div>

    <!-- 漏洞评估记录区域  -->
    <div class="dashboard_2">

        <div class="page-header" style="margin-top: 2px">
            <h3>Vulnerability Assessment Record <small style="color: #5bc0de">Real-time Data</small></h3>
        </div>

        <div style="width: 99.5%; height:290px; overflow: hidden; overflow-y:scroll; background-color: rgba(248,248,255,0.3)">

            <table style="margin-left: 0">
                <tr>
                    <th style="text-align: center">Date</th>
                    <th style="text-align: center">User</th>
                    <th style="text-align: center">Score</th>
                    <th style="text-align: center">Vulnerability Hash</th>

                </tr>

                <tr th:each="map : ${vulnerabilityAssessmentRecords}" style="width: 100%; color: #9C1A1C; font-weight: bold;">
                    <td style="text-align: center; width: 15%">
                        [[${map.date}]]
                    </td>
                    <td  style="text-align: center; width: 10%">
                        [[${map.username}]]
                    </td>
                    <td style="text-align: center; width: 5%;">
                        [[${map.score}]]
                    </td>
                    <td  style="text-align: center; width: 60%;">
                        [[${map.ipfsHash}]]
                    </td>

                </tr>

            </table>


        </div>


    </div>

    <!-- 补丁评估记录区域  -->
    <div class="dashboard_2">

        <div class="page-header" style="margin-top: 2px">
            <h3>Patch Assessment Record <small style="color: #5bc0de">Real-time Data</small></h3>
        </div>

        <div style="width: 99.5%; height:290px; overflow: hidden; overflow-y:scroll; background-color: rgba(248,248,255,0.3)">

            <table style="margin-left: 0">
                <tr>
                    <th style="text-align: center">Date</th>
                    <th style="text-align: center">User</th>
                    <th style="text-align: center">Score</th>
                    <th style="text-align: center">Vulnerability Hash</th>

                </tr>

                <tr th:each="map : ${patchAssessmentRecords}" style="width: 100%; color: #2c3b4e; font-weight: bold;">
                    <td style="text-align: center; width: 15%">
                        [[${map.date}]]
                    </td>
                    <td  style="text-align: center; width: 10%">
                        [[${map.username}]]
                    </td>
                    <td style="text-align: center; width: 5%;">
                        [[${map.score}]]
                    </td>
                    <td  style="text-align: center; width: 60%;">
                        [[${map.ipfsHash}]]
                    </td>

                </tr>

            </table>

        </div>

    </div>

</div>


<script>


    var myChart = echarts.init(document.getElementById("vulnerabilityChart"));

    var dataCount = 700;
    var data = generateData(dataCount);

    var option = {
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: false
                },
                saveAsImage: {
                    pixelRatio: 2
                }
            }
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            bottom: 90
        },
        dataZoom: [{
            type: 'inside'
        }, {
            type: 'slider'
        }],
        xAxis: {
            data: data.categoryData,
            silent: false,
            splitLine: {
                show: false
            },
            splitArea: {
                show: false
            }
        },
        yAxis: {
            splitArea: {
                show: false
            }
        },

        itemStyle: {
            normal: {
                color: '#bce8f1'

            }

        },
        series: [{
            type: 'bar',
            data: data.valueData,
            // Set `large` for large data amount
            large: true
        }]
    };

    function generateData(count) {
        var baseValue = Math.random() * 100;
        var time = +new Date(2019, 9, 23);
        var smallBaseValue;

        function next(idx) {
            smallBaseValue = idx % 30 === 0
                ? Math.random() * 700
                : (smallBaseValue + Math.random() * 500 - 250);
            baseValue += Math.random() * 20 - 10;
            return Math.max(
                0,
                Math.round(baseValue + smallBaseValue) - 1000
            );
        }

        var categoryData = [];
        var valueData = [];

        for (var i = 0; i < count; i++) {
            categoryData.push(echarts.format.formatTime('yyyy-MM-dd\nhh:mm:ss', time));
            valueData.push(next(i).toFixed(2));
            time += 1000;
        }

        return {
            categoryData: categoryData,
            valueData: valueData
        };
    }

    myChart.setOption(option);

    window.addEventListener("resize", function () {
        myChart.resize();
        myChart.resize();
    })


</script>

<script>


    var myChart = echarts.init(document.getElementById("patchChart"));

    var dataCount = 500;
    var data = generateData(dataCount);

    var option = {
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: false
                },
                saveAsImage: {
                    pixelRatio: 2
                }
            }
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            bottom: 90
        },
        dataZoom: [{
            type: 'inside'
        }, {
            type: 'slider'
        }],
        xAxis: {
            data: data.categoryData,
            silent: false,
            splitLine: {
                show: false
            },
            splitArea: {
                show: false
            }
        },
        yAxis: {
            splitArea: {
                show: false
            }
        },

        itemStyle: {
            normal: {
                color: '#bce8f1'

            }

        },
        series: [{
            type: 'bar',
            data: data.valueData,
            // Set `large` for large data amount
            large: true
        }]
    };

    function generateData(count) {
        var baseValue = Math.random() * 100;
        var time = +new Date(2019, 9, 23);
        var smallBaseValue;

        function next(idx) {
            smallBaseValue = idx % 30 === 0
                ? Math.random() * 700
                : (smallBaseValue + Math.random() * 500 - 250);
            baseValue += Math.random() * 20 - 10;
            return Math.max(
                0,
                Math.round(baseValue + smallBaseValue) - 1200
            );
        }

        var categoryData = [];
        var valueData = [];

        for (var i = 0; i < count; i++) {
            categoryData.push(echarts.format.formatTime('yyyy-MM-dd\nhh:mm:ss', time));
            valueData.push(next(i).toFixed(2));
            time += 1000;
        }

        return {
            categoryData: categoryData,
            valueData: valueData
        };
    }

    myChart.setOption(option);

    window.addEventListener("resize", function () {
        myChart.resize();
        myChart.resize();
    })


</script>




</body>