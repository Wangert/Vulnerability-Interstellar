<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" style="height: 100%">
<head th:replace="base :: #public_head">

</head>
<body style="margin: 0;">
<nav th:replace="base :: #public_nav">
</nav>
<hr th:replace="base :: #public_hr"/>

<div th:replace="personalCenterVulnerability :: #personalCenterleft"></div>


<div style="overflow-y: scroll; width: 84%; height: 100%; float: right; margin-right: 0.5%; background-color: rgba(248,248,255, 0.9)">

    <div class="page-header">
        <h1>All the patches<small><span class="glyphicon glyphicon-hand-right"></span>&nbsp;[[${vulnerabilityHash}]]</small></h1>
    </div>


    <ol class="breadcrumb">

        <li ><a th:href="@{personalCenterVulnerability}">Vulnerabilities</a></li>
        <li class="active" >Pathes</li>

    </ol>

    <div style="overflow-y: scroll; margin: 1%">
    <div class="row">

        <!--============循环遍历补丁================-->
        <div th:each="map, mapStat : ${patchList}" class="col-sm-6 col-md-4">
            <div class="thumbnail" style="background-color: rgba(105,105,105, 0.9)">
                <div style="height: 60px; width: 100%; background-color: rgba(220,20,60, 0.9);"><span class="glyphicon glyphicon-send" style="font-size: xx-large; margin-top: 15px"></span></div>

                <div class="caption">
                    <h5 style="color: white">[[${map.ipfsHash}]]</h5>
                    <p style="color: white">
                    <p style="color: white"><strong style="color:black;">Name:</strong>&nbsp;&nbsp;[[${map.patchName}]]</p>
                    <p style="color: white"><strong style="color: black;">Publisher:</strong>&nbsp;&nbsp;[[${map.username}]]</p>
                    <p style="color: white"><strong style="color: black;">Submit Date:</strong>&nbsp;&nbsp;[[${map.releaseDate}]]</p>
                    </p>
                    <button type="button" style="background-color: rgba(0,191,255, 0.9)" class="btn btn-primary" data-toggle="modal" th:data-target="'#vulnerability' + ${mapStat.index}">View</button>
                    <div class="modal fade" th:id="'vulnerability' + ${mapStat.index}" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="page-header">
                                    <h1>Patch Information <small>[[${map.patchName}]]</small></h1>
                                </div>
                                <hr/>
                                <div>
                                    <p><h3>Patch Publisher:</h3>[[${map.username}]]</p>
                                    <p><h3>Patch Hash:</h3>[[${map.ipfsHash}]]</p>
                                    <p><h3>Vulnerability Hash:</h3>[[${map.vulnerabilityHash}]]</p>
                                    <p><h3>Patch Submit Date:</h3>[[${map.releaseDate}]]</p>
                                    <p><h3>Star:</h3>[[${map.star}]]</p>
                                    <p><h3>Score:</h3>[[${map.score}]]</p>
                                    <p><h3>Patch Description:</h3>
                                    <textarea class="form-control" style="width: 70%; margin-left: 15%" rows="8" th:text="${map[description]}" disabled></textarea>
                                    </p>

                                    <br/>

                                    <div>
                                        <button type="button" class="btn btn-info" th:onclick="downloadPatch([[${map.ipfsHash}]]);">Download</button>
                                    </div>


                                    <a th:id="'download' + ${map[ipfsHash]}" th:href="@{/downloadPatch(fileName=${map[ipfsHash]} + '.zip')}" style="display: none"></a>

                                    <br/>
                                    <hr/>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!--
                        <a href="#" class="btn btn-primary" role="button" style="background-color: rgba(0,191,255, 0.9)">View</a>
                        -->
                    <a href="#" class="btn btn-default" role="button" style="background-color: rgba(240,255,255, 0.9)">Pass</a>
                </div>
            </div>
        </div>


    </div>

 </div>


</div>
</body>